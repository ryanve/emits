/*!
 * energy 0.5.0+201509072117
 * https://github.com/ryanve/energy
 * @license MIT
 */
!function(a,b,c){"undefined"!=typeof module&&module.exports?module.exports=c():a[b]=c()}(this,"energy",function(){function a(a,b){for(var c in b)void 0===a[c]&&(a[c]=b[c]);return a}function b(c){this[p]=c instanceof b?a({},c[p]):a(c||{},h[p]),this[m]={}}function c(a){return a instanceof b?a[q]():new b(a)}function d(a,b,c,d){var e=a&&a.length,f=0;for(d=void 0===d?i:d;e>f&&d!==a[f++].apply(b,c););return f}function e(a,b,c){a[b]=l.call(this,b)&&this[b]||c}function f(a,b){return a===b||!!a&&a[n]===b}function g(a,b,c){c>>=0;for(var d=a.length;d--&&(!f(a[d],b)||!a.splice(d,1)||--c););}var h=c.prototype=b.prototype,i={},j=[],k=j.slice,l=i.hasOwnProperty,m="_events",n="_origin",o="emit",p="mode",q="init",r="listeners",s=function(a){return a instanceof Array&&a};return h[p]={max:0,all:!1},c.to=function(b){return a(b,this.call())},h.to=function(b){return a(b,this),this},h[q]=function(){return e(this,p,{}),e(this,m,{}),this},h[o]=function(a){var b=k.call(arguments,1),c=d(this[r](a),this,b);return this[p].all&&d(this[r](this[p].all),this,b),c},h[r]=function(a){return this[m][a]=s(this[m][a])||[]},h.clone=function(){var c=new b(this);return a(c[m],this[m]),c},h.on=function(a,b){if(null==a||null==b)throw new TypeError("@on");var c,d=this[p].max;if(c=this[r](a).push(b),d>0&&c>d)throw new RangeError("@max");return this},h.off=function(a,b,c){return null!=b?g(this[r](a),b,c):null!=a?this[m][a]=void 0:arguments.length||(this[m]={}),this},h.once=function(a,b){var c=this,d=function(){return c.off(a,d),b.apply(this,arguments)};return d[n]=b,this.on(a,d)},c.applies=d,c});