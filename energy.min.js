/*!
 * energy 0.4.0+201405032016
 * https://github.com/ryanve/energy
 * MIT License (c) 2014 Ryan Van Etten
 */
!function(a,b,c){"undefined"!=typeof module&&module.exports?module.exports=c():a[b]=c()}(this,"energy",function(){function a(a,b){for(var c in b)void 0===a[c]&&(a[c]=b[c]);return a}function b(c){this[o]=c instanceof b?a({},c[o]):a(c||{},g[o]),this[l]={}}function c(a){return a instanceof b?a[p]():new b(a)}function d(a,b,c,d){var e=a&&a.length,f=0;for(d=void 0===d?h:d;e>f&&d!==a[f++].apply(b,c););return f}function e(a,b,c){a[b]=k.call(this,b)&&this[b]||c}function f(a,b,c){c>>=0;for(var d=a.length;d--&&(!(b===a[d]||a[d]&&b===a[d][m])||!a.splice(d,1)||--c););}var g=c.prototype=b.prototype,h={},i=[],j=i.slice,k=h.hasOwnProperty,l="_events",m="_origin",n="emit",o="mode",p="init",q="listeners",r=function(a){return a instanceof Array&&a};return g[o]={max:0,all:!1},c.to=function(b){return a(b,this.call())},g.to=function(b){return a(b,this),this},g[p]=function(){return e(this,o,{}),e(this,l,{}),this},g[n]=function(a){var b=j.call(arguments,1),c=d(this[q](a),this,b);return this[o].all&&d(this[q](this[o].all),this,b),c},g[q]=function(a){return this[l][a]=r(this[l][a])||[]},g.clone=function(){var c=new b(this);return a(c[l],this[l]),c},g.on=function(a,b){if(null==a||null==b)throw new TypeError("@on");var c,d=this[o].max;if(c=this[q](a).push(b),d>0&&c>d)throw new RangeError("@max");return this},g.off=function(a,b,c){return null!=b?f(this[q](a),b,c):null!=a?this[l][a]=void 0:arguments.length||(this[l]={}),this},g.once=function(a,b){var c=this,d=function(){return c.off(a,d),b.apply(this,arguments)};return d[m]=b,this.on(a,d)},c.applies=d,c});