/*!
 * energy 0.3.0+201403100550
 * https://github.com/ryanve/energy
 * MIT License (c) 2014 Ryan Van Etten
 */
!function(a,b,c){"undefined"!=typeof module&&module.exports?module.exports=c():a[b]=c()}(this,"energy",function(){function a(a,b){for(var c in b)void 0===a[c]&&(a[c]=b[c]);return a}function b(c){this[p]=c instanceof b?a({},c[p]):a(c||{},g[p]),this[m]={}}function c(a){return a instanceof b?a[q]():new b(a)}function d(a,b,c,d){var e=a&&a.length,f=0;for(d=void 0===d?h:d;e>f&&d!==a[f++].apply(b,c););return f}function e(a,b,c){a[b]=k.call(this,b)&&this[b]||c}function f(a,b,c){c>>=0;for(var d=a.length;d--&&(!(b===a[d]||a[d]&&b===a[d][n])||!a.splice(d,1)||--c););}var g=c.prototype=b.prototype,h={},i=[],j=i.slice,k=h.hasOwnProperty,l=h.toString,m="_events",n="_origin",o="emit",p="mode",q="init",r="listeners",s=Array.isArray||function(a){return l.call(i)===l.call(a)};return g[p]={max:0,all:!1},g[q]=function(){return e(this,p,{}),e(this,m,{}),this},g[o]=function(a){var b=j.call(arguments,1),c=d(this[r](a),this,b);return this[p].all&&d(this[r](this[p].all),this,b),c},g[r]=function(a){return s(this[m][a])?this[m][a]:this[m][a]=[]},g.clone=function(){var c=new b(this);return a(c[m],this[m]),c},g.on=function(a,b){if(null==a||null==b)throw new TypeError("@on");var c,d=this[p].max;if(c=this[r](a).push(b),d>0&&c>d)throw new RangeError("@max");return this},g.off=function(a,b,c){return null!=b?f(this[r](a),b,c):null!=a?this[m][a]=void 0:arguments.length||(this[m]={}),this},g.once=function(a,b){var c=this,d=function(){return c.off(a,d),b.apply(this,arguments)};return d[n]=b,this.on(a,d)},c.applies=d,c});